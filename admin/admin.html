<!doctype html>
<html lang="es-AR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin</title>
  <style>
    :root {
      --bg: #f3f5ff;
      --card: #ffffff;
      --text: #1f2a44;
      --muted: #5f6882;
      --primary: #4f46e5;
      --primary-soft: #e4e7ff;
      --border: #dde2f2;
    }
    * { box-sizing: border-box; }
    body {
      font-family: system-ui, Arial, sans-serif;
      margin: 0;
      color: var(--text);
      background: radial-gradient(circle at top left, #eef1ff 0%, var(--bg) 48%, #edf8ff 100%);
    }
    main { max-width: 1180px; margin: 0 auto; padding: 18px 14px 40px; }
    h2 { margin-top: 0; }
    .row { display: flex; gap: 10px; flex-wrap: wrap; align-items: center; }
    input, button, select {
      padding: 10px;
      border-radius: 10px;
      border: 1px solid var(--border);
      font-size: 14px;
      background: #fff;
    }
    button {
      background: var(--primary);
      color: #fff;
      border-color: transparent;
      font-weight: 600;
      cursor: pointer;
    }
    button:hover { filter: brightness(1.05); }
    table { border-collapse: collapse; width: 100%; margin-top: 12px; overflow: hidden; border-radius: 12px; }
    th, td { border: 1px solid var(--border); padding: 8px; background: #fff; }
    th { background: #edf1ff; text-align: left; }
    .card {
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 14px;
      margin: 12px 0;
      background: var(--card);
      box-shadow: 0 10px 24px rgba(56, 68, 120, .08);
      scroll-margin-top: 132px;
    }
    .muted { color: var(--muted); }
    .top-nav {
      position: sticky;
      top: 0;
      background: rgba(243, 245, 255, .94);
      backdrop-filter: blur(8px);
      padding: 12px 0;
      z-index: 20;
      border-bottom: 1px solid rgba(131, 147, 203, .26);
    }
    .top-nav .shell { max-width: 1180px; margin: 0 auto; padding: 0 14px; }
    .nav-btn {
      display: inline-block;
      padding: 9px 12px;
      border: 1px solid var(--border);
      border-radius: 999px;
      text-decoration: none;
      color: var(--text);
      background: #fff;
      font-weight: 700;
    }
    .jump-wrap {
      background: #fff;
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 10px;
      margin-top: 10px;
    }
    .links-grid {
      display: grid;
      gap: 8px;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      margin-top: 10px;
    }
    .link-chip {
      text-decoration: none;
      color: #1f2a44;
      background: var(--primary-soft);
      border: 1px solid #cfd6ff;
      border-radius: 10px;
      padding: 10px;
      font-weight: 600;
      display: block;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="top-nav">
    <div class="shell">
      <div class="row">
        <a class="nav-btn" href="admin.html">Admin</a>
        <a class="nav-btn" href="../index.html" target="_blank" rel="noopener">Landing</a>
        <a class="nav-btn" href="../leaderboard.html" target="_blank" rel="noopener">Leaderboard</a>
        <a class="nav-btn" href="../bracket.html" target="_blank" rel="noopener">Bracket</a>
        <a class="nav-btn" href="errors.html" target="_blank" rel="noopener">Errores</a>
      </div>
      <div class="jump-wrap row">
        <strong>Ir a sección:</strong>
        <select id="sectionJump"></select>
      </div>
    </div>
  </div>

  <main>
    <h2>Admin (modo prueba)</h2>

    <section class="card" id="sec-links" data-title="Botonera completa">
      <h3>Botonera completa de webs</h3>
      <p class="muted">Accesos rápidos para todas las pantallas públicas y de administración.</p>
      <div class="links-grid">
        <a class="link-chip" href="../index.html" target="_blank" rel="noopener">Landing jugadores</a>
        <a class="link-chip" href="../leaderboard.html" target="_blank" rel="noopener">Leaderboard</a>
        <a class="link-chip" href="../bracket.html" target="_blank" rel="noopener">Bracket</a>
        <a class="link-chip" href="../luzverde.html" target="_blank" rel="noopener">Juego Luz Verde</a>
        <a class="link-chip" href="../luzroja.html" target="_blank" rel="noopener">Juego No te quedes quieto</a>
        <a class="link-chip" href="../foto.html" target="_blank" rel="noopener">Subir foto</a>
        <a class="link-chip" href="qr_scanner.html" target="_blank" rel="noopener">Juego Escáner QR</a>
        <a class="link-chip" href="sumador.html" target="_blank" rel="noopener">Juego Sumador</a>
        <a class="link-chip" href="virus.html" target="_blank" rel="noopener">Juego Virus</a>
        <a class="link-chip" href="luzverde_host.html" target="_blank" rel="noopener">Host Luz Verde</a>
        <a class="link-chip" href="luzroja_host.html" target="_blank" rel="noopener">Host No te quedes quieto</a>
        <a class="link-chip" href="errors.html" target="_blank" rel="noopener">Visor de errores</a>
      </div>
    </section>

    <section class="card" id="sec-auth" data-title="Token y estado">
    <div class="row">
      <input id="token" placeholder="Admin token" style="min-width:320px">
      <button id="saveToken">Guardar token</button>
      <button id="ping">Ping (test)</button>
      <span id="status" class="muted"></span>
      <span class="muted">El panel se carga solo; Ping es para probar API/token.</span>
    </div>
    </section>

  <section class="card" id="sec-multiplier" data-title="QR multiplier">
    <h3>QR multiplier</h3>
    <div class="row">
      <select id="qrMul">
        <option value="1">x1</option>
        <option value="2">x2</option>
        <option value="3">x3</option>
      </select>
      <button id="setMul">Aplicar</button>
      <span id="mulMsg" class="muted"></span>
    </div>
  </section>


  <section class="card" id="sec-qr" data-title="Generación de QRs">
    <h3>QRs</h3>
    <div class="row">
      <select id="qrType">
        <option value="game">Acceso a juego</option>
        <option value="secret">QR secreto (puntos)</option>
      </select>
      <select id="qrGame"></select>
      <input id="qrPoints" type="number" value="10" placeholder="points_delta" style="width:140px">
      <input id="qrCount" type="number" value="1" min="1" max="50" placeholder="cantidad" style="width:100px">
      <button id="qrCreate">Generar</button>
      <span id="qrMsg" class="muted"></span>
    </div>
    <div id="qrGenerated" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:10px;margin-top:12px"></div>
    <table id="qrList">
      <thead><tr><th>Fecha</th><th>Code</th><th>Tipo</th><th>Juego/Puntos</th><th>Activo</th><th>Acción</th><th>QR</th></tr></thead>
      <tbody></tbody>
    </table>
  </section>

  <section class="card" id="sec-games" data-title="Listado de juegos">
    <h3>Juegos</h3>
    <table id="games">
      <thead><tr><th>ID</th><th>Estado</th><th>Code</th><th>Nombre</th><th>Acción</th></tr></thead>
      <tbody></tbody>
    </table>
  </section>


<section class="card" id="sec-virus" data-title="Juego Virus">
  <h3>Juego Virus</h3>
  <div class="row">
    <button id="virusToggle">Virus ON/OFF</button>
    <button id="virusReset">Reset virus session</button>
    <button id="virusLbLoad">Cargar leaderboard virus</button>
    <span id="virusMsg" class="muted"></span>
  </div>
  <table id="virusLb">
    <thead><tr><th>#</th><th>Jugador</th><th>Código</th><th>Rol</th><th>Power</th><th>Interacciones</th></tr></thead>
    <tbody></tbody>
  </table>
</section>

<section class="card" id="sec-global" data-title="Control global">
  <h3>Control global</h3>
  <div class="row">
    <button id="btnScoringToggle">Cargando...</button>
    <span id="scoringMsg" class="muted"></span>
  </div>
</section>

<section class="card" id="sec-events" data-title="Eventos auditoría">
  <h3>Últimos eventos (auditoría)</h3>
  <button id="loadEvents">Cargar últimos 50</button>
  <table id="events">
    <thead>
      <tr>
        <th>ID</th><th>Fecha</th><th>Jugador</th><th>Tipo</th><th>Pts</th><th>Juego</th><th>QR</th><th>Nota</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</section>

<section class="card" id="sec-reset" data-title="Reset total jugador">
  <h3>Reset TOTAL de jugador (testing)</h3>
  <div class="row">
    <input id="resetPid" placeholder="player_id" style="width:120px">
    <button id="resetGo">Reset TOTAL</button>
    <span id="resetMsg" class="muted"></span>
  </div>
</section>

  <section class="card" id="sec-leaderboard" data-title="Leaderboard">
    <h3>Leaderboard</h3>
    <div class="row">
      <button id="loadLb">Cargar leaderboard</button>
      <a href="errors.html" target="_blank" rel="noopener">Abrir visor de errores</a>
    </div>
    <table id="lb">
      <thead><tr><th>#</th><th>Nombre</th><th>Código</th><th>Puntos</th></tr></thead>
      <tbody></tbody>
    </table>
  </section>

  <section class="card" id="sec-players" data-title="Jugadores">
    <h3>Jugadores</h3>
    <button id="loadPlayers">Cargar jugadores</button>
    <table id="players">
      <thead><tr><th>ID</th><th>Nombre</th><th>Código</th><th>Acción</th></tr></thead>
      <tbody></tbody>
    </table>
  </section>

  <section class="card" id="sec-adjust" data-title="Ajuste de puntos">
    <h3>Ajuste puntos</h3>
    <div class="row">
      <input id="adjPid" placeholder="player_id" style="width:120px">
      <input id="adjPts" placeholder="points_delta (ej 50 o -10)" style="width:220px">
      <input id="adjNote" placeholder="nota" style="min-width:240px">
      <button id="adjGo">Aplicar</button>
      <span id="adjMsg" class="muted"></span>
    </div>
  </section>
  </main>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script src="admin.js"></script>
</body>
</html>
